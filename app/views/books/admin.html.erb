<h1>Books on Demand Requests</h1>

<%= render partial: 'admin_filters' %>

<table id="adminTable" class="table table-striped table-hover">
  <thead>
    <tr>
      <th><%= sort_link(@q, :id, t('helpers.label.book.id')) %></th>
      <th><%= sort_link(@q, :name, t('helpers.label.book.user')) %></th>
      <th><%= sort_link(@q, :title, t('helpers.label.book.title')) %></th>
      <th><%= sort_link(@q, :created_at, t('helpers.label.book.created_at')) %></th>
      <th><%= sort_link(@q, :purchase, t('helpers.label.book.purchase')) %></th>
    </tr>
  </thead>
  <tbody>
  <% @books.each do |book| %>
    <tr>
      <td><%= link_to book.id.to_s, book_path(book) %></td>
      <td><%= book.name %></td>
      <td><%= book.title %></td>
      <td><%= book.created_at.in_time_zone(@zone).to_s(:long) %></td>
      <td><%= book.purchase %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%== pagy_bootstrap_nav(@pagy) %>

<div>
  <%= link_to books_admin_path({format: :csv}.merge(params)), class: 'btn btn-primary' do %>
    <%= fa_icon "download", text: 'Export Requests' %>
  <% end %>
</div>
